<!--
  Generated template for the ConfirmPhotoPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="primary">
    <ion-title>Your Bill</ion-title>
  </ion-navbar>
</ion-header>
<ion-content>
  <div *ngIf="priceData" class="price-list">
    <h4>BILL ITEMS</h4>
    <ion-list class="bill-items">
      <ion-item *ngFor="let price of priceData.items; let i = index">
        <div class="bill-item">
          <span class="item-name">{{priceData.labels[i]}}</span>
          <span class="item-price">{{price | currency}}</span>
        </div>
      </ion-item>
    </ion-list>
    <ion-list class="total-price">
      <ion-item>
        <div class="total-item">
          <span class="item-name">Subtotal</span>
          <span class="item-price">{{priceData.sub | currency}}</span>
        </div>
      </ion-item>
      <ion-item>
        <div class="total-item">
          <span class="item-name">Tax</span>
          <span class="item-price">{{priceData.tax | currency}}</span>
        </div>
      </ion-item>
      <ion-item *ngIf="tip.percent">
        <div class="total-item">
          <span class="item-name">Tip</span>
          <span class="item-price">{{tip.amount | currency}}</span>
        </div>
      </ion-item>
      <ion-item>
        <div class="total-item total">
          <span class="item-name">Total</span>
          <span class="item-price">{{totalPrice | currency}}</span>
        </div>
      </ion-item>
    </ion-list>
    <h4>ADD TIP</h4>
    <div class="choose-tip">
      <button ion-button class="tip-button" [ngClass]="{'active' : tip.percent == 0.1}" (click)="setTip(0.1)">10%</button>
      <button ion-button class="tip-button" [ngClass]="{'active' : tip.percent == 0.15}" (click)="setTip(0.15)">15%</button>
      <button ion-button class="tip-button" [ngClass]="{'active' : tip.percent == 0.2}" (click)="setTip(0.2)">20%</button>
    </div>
    <h4>PAYMENT METHOD</h4>
    <button ion-button clear color="dark" class="payment-method">
      <div class="card-info">
        <div class="payment-vector">
          <img src="../../assets/imgs/visa.png" alt="">
        </div>
        <span class="card-number">&#8226;&#8226;&#8226;&#8226; 4242</span>
      </div>
      <span class="change-button">Change</span>
    </button>
  </div>
</ion-content>

<div class="payment-button">
  <button ion-button large color="dark-primary">PAY NOW <span class="gap"></span> {{totalPrice | currency}}</button>
</div>

<div class="image-wrapper">
  <canvas style="flex-shrink: 0" id="canvasOutput"></canvas>
  <img id="imageSrc" src="{{image}}" alt="">
</div>

<div *ngIf="processingReceipt" class="processing-overlay">
  <div class="loading-text">
    <span>{{processState}}</span>
    <ion-spinner color="light" *ngIf="processPercent != '100%'"></ion-spinner>
  </div>
  <div class="loading-bar">
    <div class="loaded" [style.width]=processPercent></div>
  </div>
</div>

